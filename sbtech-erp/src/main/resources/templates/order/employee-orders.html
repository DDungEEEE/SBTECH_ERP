<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>내 주문</title>
    <style>
        body{margin:0;font-family:'Noto Sans KR',sans-serif;display:flex;background:#f5f7fa;}
        .sidebar{width:220px;background:#1e293b;color:white;padding-top:20px;min-height:100vh;}
        .sidebar a{display:block;padding:12px 20px;color:#cbd5e1;text-decoration:none;font-size:15px;}
        .sidebar a.active,.sidebar a:hover{background:#2563eb;color:white;border-radius:6px;}
        .main{flex:1;padding:30px;min-height:100vh;}

        .filter-box{
            background:white;padding:15px;border-radius:10px;
            display:flex;align-items:center;gap:10px;box-shadow:0 2px 8px rgba(0,0,0,0.05);
            margin-bottom:15px;
        }
        input{padding:8px;border:1px solid #ddd;border-radius:6px;font-size:14px;}
        .date-btn{padding:8px 12px;border:1px solid #ddd;border-radius:6px;background:white;cursor:pointer;}
        .date-btn:hover{background:#eaeaea;}

        .table-card{background:white;border-radius:10px;padding:20px;box-shadow:0 2px 8px rgba(0,0,0,0.05);}
        table{width:100%;border-collapse:collapse;margin-top:10px;}
        th,td{padding:12px;border-bottom:1px solid #e5e7eb;text-align:center;}
        th{background:#f9fafb;font-weight:600;}

        .status{padding:5px 10px;border-radius:6px;color:white;font-size:13px;}
        .done{background:#16a34a;}
        .progress{background:#2563eb;}
        .pending{background:#f59e0b;}
    </style>
</head>

<body>

<div class="sidebar">
    <h2 style="text-align:center;">ERP System</h2>
    <a href="dashboard.html">대시보드</a>
    <a href="tasks.html">내 업무</a>
    <a class="active" href="#">내 주문</a>
    <a href="report.html">보고서</a>
</div>

<div class="main">
    <h1>내 주문</h1>

    <div class="filter-box">
        <span>거래처 이름 검색</span>
        <input id="searchInput" type="text" placeholder="예: 수원점" oninput="filterTable()">

        <span>날짜 설정</span>
        <input id="startDate" type="date" onchange="filterTable()"> ~
        <input id="endDate" type="date" onchange="filterTable()">

        <button class="date-btn" onclick="setRange(7)">최근 7일</button>
        <button class="date-btn" onclick="setRange(15)">최근 15일</button>
        <button class="date-btn" onclick="setRange(30)">최근 1개월</button>
        <button class="date-btn" onclick="setRange(90)">최근 3개월</button>
    </div>

    <div class="table-card">
        <h3>주문 목록 (총 42건)</h3>
        <table id="orderTable">
            <tr>
                <th>주문번호</th><th>고객사</th><th>상품</th><th>금액</th><th>날짜</th><th>상태</th>
            </tr>
        </table>
    </div>
</div>

<script>
    // ✅ 배터리프렌즈 지점 리스트
    const branches=["수원점","창포점","김포점","판교점","의정부점","광명점","인천점","대전점","천안점","울산점","부산점","대구점","창원점","전주점","광주점","목포점","제주점"];
    const products=["DF1000","XF1200","EV셀","산업용배터리","충전모듈","ESS모듈","배터리팩"];
    const statusArr=["done","pending","progress"];

    let orders=[{no:"ORD-145",client:"배터리프렌즈 수원점",product:"DF1000 10개",price:"₩500,000",date:"2025-11-01",status:"done"}];

    // ✅ random generate 41 orders
    for(let i=146;i<=186;i++){
        const branch = branches[Math.floor(Math.random()*branches.length)];
        const product = products[Math.floor(Math.random()*products.length)];
        const qty = (Math.floor(Math.random()*5)+1)*10;
        const price = `₩${(Math.floor(Math.random()*150)+1)*100000}`;
        const date = new Date(Date.now()-Math.floor(Math.random()*90)*86400000).toISOString().slice(0,10);
        const status = statusArr[Math.floor(Math.random()*3)];
        orders.push({no:`ORD-${i}`,client:`배터리프렌즈 ${branch}`,product:`${product} ${qty}개`,price,date,status});
    }

    // ✅ Render table
    function renderTable(){
        let html="";
        orders.forEach(o=>{
            html+=`
<tr>
<td>${o.no}</td><td>${o.client}</td><td>${o.product}</td><td>${o.price}</td><td>${o.date}</td>
<td><span class="status ${o.status}">${o.status==="done"?"완료":o.status==="progress"?"진행중":"대기"}</span></td>
</tr>
`;
        });
        document.querySelector("#orderTable").innerHTML+=html;
    }
    renderTable();

    // ✅ Filter
    function filterTable(){
        let input=document.getElementById("searchInput").value.toLowerCase();
        let rows=document.querySelectorAll("#orderTable tr");
        let start=document.getElementById("startDate").value;
        let end=document.getElementById("endDate").value;

        rows.forEach((r,i)=>{
            if(i===0)return;
            let t=r.innerText.toLowerCase();
            let date=r.cells[4].innerText;
            let show=true;
            if(input && !t.includes(input)) show=false;
            if(start && date<start) show=false;
            if(end && date>end) show=false;
            r.style.display=show?"":"none";
        });
    }
    // ✅ quick date filter
    function setRange(days){
        let end=new Date(),start=new Date();
        start.setDate(end.getDate()-days);
        document.getElementById("startDate").value=start.toISOString().slice(0,10);
        document.getElementById("endDate").value=end.toISOString().slice(0,10);
        filterTable();
    }
</script>

</body>
</html>
