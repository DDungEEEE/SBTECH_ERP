<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>내 업무</title>
    <style>
        body { margin:0; font-family:'Noto Sans KR',sans-serif; display:flex; background:#f5f7fa;}
        .sidebar { width:220px;background:#1e293b;color:white;padding-top:20px;min-height:100vh; }
        .sidebar a { display:block;padding:12px 20px;color:#cbd5e1;text-decoration:none;font-size:15px; }
        .sidebar a.active, .sidebar a:hover { background:#2563eb;color:white;border-radius:6px; }

        .main { flex:1;padding:30px;min-height:100vh; }
        h1 { margin-top:0; }

        .stats-box { display:flex; gap:20px; margin-bottom:20px; }
        .stat-card {
            flex:1; background:white; border-radius:10px; padding:20px;
            box-shadow:0 2px 8px rgba(0,0,0,0.05);
        }
        .stat-card h2 { margin:0; font-size:24px; }
        .stat-card span { color:gray; font-size:13px; }

        .filter-box { margin-bottom:15px; display:flex; gap:10px; align-items:center; }
        input, select {
            padding:8px;border:1px solid #ddd;border-radius:6px;font-size:14px;
        }
        .add-btn {
            margin-left:auto; padding:8px 14px; background:#2563eb; color:white; border:none;
            border-radius:6px; cursor:pointer;
        }

        .table-card { background:white;border-radius:10px;padding:20px;box-shadow:0 2px 8px rgba(0,0,0,0.05); }
        table { width:100%;border-collapse:collapse;margin-top:10px; }
        th,td { padding:12px;border-bottom:1px solid #e5e7eb;text-align:center; }
        th { background:#f9fafb;font-weight:600; }

        .status { padding:5px 10px;border-radius:5px;color:white;font-size:13px;cursor:pointer; }
        .pending { background:#f59e0b; }
        .progress { background:#2563eb; }
        .done { background:#16a34a; }
    </style>
</head>

<body>

<div class="sidebar">
    <h2 style="text-align:center;">ERP System</h2>
    <a href="dashboard.html">대시보드</a>
    <a href="#" class="active">내 업무</a>
    <a href="orders.html">내 주문</a>
    <a href="report.html">보고서</a>
</div>

<div class="main">
    <h1>내 업무</h1>

    <!-- 업무 상태 카운트 -->
    <div class="stats-box">
        <div class="stat-card">
            <h2 id="countProgress">1</h2>
            <span>진행중</span>
        </div>
        <div class="stat-card">
            <h2 id="countPending">1</h2>
            <span>대기</span>
        </div>
        <div class="stat-card">
            <h2 id="countDone">1</h2>
            <span>완료</span>
        </div>
    </div>

    <!-- 필터 및 추가 버튼 -->
    <div class="filter-box">
        <input type="text" id="searchInput" placeholder="업무명 검색" oninput="filterTasks()">
        <select id="statusFilter" onchange="filterTasks()">
            <option value="">전체 상태</option>
            <option value="진행중">진행중</option>
            <option value="대기">대기</option>
            <option value="완료">완료</option>
        </select>
    </div>

    <div class="table-card">
        <h3>업무 목록</h3>
        <table id="taskTable">
            <tr><th>업무명</th><th>내용</th><th>마감일</th><th>상태</th></tr>
            <tr><td>월간 보고서 작성</td><td>경영보고서 작성</td><td>2025-10-30</td><td><span class="status progress" onclick="toggleStatus(this)">진행중</span></td></tr>
            <tr><td>고객사 미팅 준비</td><td>자료 및 PT 준비</td><td>2025-10-28</td><td><span class="status pending" onclick="toggleStatus(this)">대기</span></td></tr>
            <tr><td>거래처 견적서 제출</td><td>제품 견적 요청 대응</td><td>2025-10-25</td><td><span class="status done" onclick="toggleStatus(this)">완료</span></td></tr>

            <tr><td>신규 고객사 발굴</td><td>잠재 고객 조사 및 연락</td><td>2025-10-29</td>
                <td><span class="status progress" onclick="toggleStatus(this)">진행중</span></td></tr>

            <tr><td>제품 카탈로그 업데이트</td><td>2025년 신제품 정보 반영</td><td>2025-11-05</td>
                <td><span class="status progress" onclick="toggleStatus(this)">진행중</span></td></tr>

            <tr><td>재고 수량 검토</td><td>품목별 안전재고 확인</td><td>2025-10-31</td>
                <td><span class="status progress" onclick="toggleStatus(this)">진행중</span></td></tr>

            <tr><td>세미나 발표 준비</td><td>발표자료 제작 및 리허설</td><td>2025-11-02</td>
                <td><span class="status progress" onclick="toggleStatus(this)">진행중</span></td></tr>

            <tr><td>고객 불만 처리</td><td>배송 지연 고객 응대</td><td>2025-10-27</td>
                <td><span class="status progress" onclick="toggleStatus(this)">진행중</span></td></tr>

            <tr><td>내부 시스템 개선 요청</td><td>ERP 기능 개선 아이디어 정리</td><td>2025-11-01</td>
                <td><span class="status progress" onclick="toggleStatus(this)">진행중</span></td></tr>
        </table>
    </div>
</div>

<script>
    function toggleStatus(el) {
        if (el.classList.contains("progress")) {
            el.className = "status done"; el.textContent = "완료";
        } else if (el.classList.contains("pending")) {
            el.className = "status progress"; el.textContent = "진행중";
        } else {
            el.className = "status pending"; el.textContent = "대기";
        }
        updateCounts();
        filterTasks();
    }

    function updateCounts() {
        document.getElementById("countProgress").textContent =
            document.querySelectorAll(".progress").length;
        document.getElementById("countPending").textContent =
            document.querySelectorAll(".pending").length;
        document.getElementById("countDone").textContent =
            document.querySelectorAll(".done").length;
    }

    function filterTasks() {
        let search = document.getElementById("searchInput").value.toLowerCase();
        let filter = document.getElementById("statusFilter").value;
        let rows = document.querySelectorAll("#taskTable tr:not(:first-child)");

        rows.forEach(row => {
            let name = row.cells[0].textContent.toLowerCase();
            let status = row.cells[3].textContent;

            let show = (!search || name.includes(search)) &&
                (!filter || status === filter);

            row.style.display = show ? "" : "none";
        });
    }

    updateCounts();
</script>

</body>
</html>
